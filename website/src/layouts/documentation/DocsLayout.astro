---
import { getCollection } from "astro:content";
import BaseLayout from "./BaseLayout.astro";

interface Props {
	title: string;
	description: string;
}

const allDocs = await getCollection("docs");

const pages = allDocs
	.map((doc) => {
		console.log(doc.id);
		return {
			href: `docs/${doc.id}`,
			index: doc.data.index,
			label: doc.data.title,
			group: doc.data.group,
		};
	})
	.sort((a, b) => a.index - b.index);

const navigation = [
	{
		label: "Getting Started",
		items: pages.filter((page) => page.group === "Getting Started"),
	},
	{
		label: "Connections",
		items: pages.filter((page) => page.group === "Connections"),
	},
	{
		label: "Integrations",
		items: pages.filter((page) => page.group === "Integrations"),
	},
];
---

<BaseLayout segment="docs" navigation={navigation} {...Astro.props}>
	<slot />
</BaseLayout>
